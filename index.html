<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>init.el for Noah Hoffman</title>
<!-- 2013-08-07 Wed 22:18 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="generator" content="Org-mode"/>
<meta name="author" content="Noah Hoffman"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://twitter.github.io/bootstrap/assets/css/bootstrap.css" />
<style type="text/css">.table {width: auto;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body class="container">
<div id="content">
<h1 class="title">init.el for Noah Hoffman</h1>
<p>
In a fit of literate programming yak-shaving, I have implemented my emacs configuration as an org-mode file.
</p>

<ul class="org-ul">
<li>The source for this page is available at <a href="https://github.com/nhoffman/.emacs.d">https://github.com/nhoffman/.emacs.d</a>
</li>
<li>The html-exported version of this page is hosted at <a href="http://nhoffman.github.io/.emacs.d">http://nhoffman.github.io/.emacs.d</a>
</li>
</ul>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Using this file</a></li>
<li><a href="#sec-2">2. Publishing to gh-pages</a></li>
<li><a href="#sec-3">3. ELPA</a></li>
<li><a href="#sec-4">4. Various aliases and key bindings</a></li>
<li><a href="#sec-5">5. Startup and general appearance</a></li>
<li><a href="#sec-6">6. Environment</a>
<ul>
<li><a href="#sec-6-1">6.1. update load path</a></li>
<li><a href="#sec-6-2">6.2. update SSH_AUTH_SOCK</a></li>
<li><a href="#sec-6-3">6.3. exec-path-from-shell</a></li>
</ul>
</li>
<li><a href="#sec-7">7. Exiting and saving</a></li>
<li><a href="#sec-8">8. Platform and display-specific settings</a></li>
<li><a href="#sec-9">9. Scrolling</a></li>
<li><a href="#sec-10">10. Marking</a></li>
<li><a href="#sec-11">11. Cursor Appearance.</a></li>
<li><a href="#sec-12">12. iswitchb mode</a></li>
<li><a href="#sec-13">13. Keyboard macros</a></li>
<li><a href="#sec-14">14. emacs desktop</a></li>
<li><a href="#sec-15">15. Move lines up and down with arrow keys</a></li>
<li><a href="#sec-16">16. Buffers and windows</a>
<ul>
<li><a href="#sec-16-1">16.1. Switch windows with arrow keys</a></li>
<li><a href="#sec-16-2">16.2. Transpose buffers</a></li>
<li><a href="#sec-16-3">16.3. Switch buffers between frames</a></li>
</ul>
</li>
<li><a href="#sec-17">17. spelling</a></li>
<li><a href="#sec-18">18. pine/alpine</a></li>
<li><a href="#sec-19">19. LaTeX</a></li>
<li><a href="#sec-20">20. ESS</a></li>
<li><a href="#sec-21">21. org-mode</a>
<ul>
<li><a href="#sec-21-1">21.1. pygments</a></li>
<li><a href="#sec-21-2">21.2. org-mode utilities</a></li>
</ul>
</li>
<li><a href="#sec-22">22. markdown</a></li>
<li><a href="#sec-23">23. chrome "edit with emacs"</a></li>
<li><a href="#sec-24">24. Python</a></li>
<li><a href="#sec-25">25. python-pylint</a></li>
<li><a href="#sec-26">26. flycheck</a></li>
<li><a href="#sec-27">27. flymake: check code dynamically</a></li>
<li><a href="#sec-28">28. text-mode</a></li>
<li><a href="#sec-29">29. rst-mode</a></li>
<li><a href="#sec-30">30. tramp</a></li>
<li><a href="#sec-31">31. ibuffer</a></li>
<li><a href="#sec-32">32. dired</a></li>
<li><a href="#sec-33">33. uniquify</a></li>
<li><a href="#sec-34">34. ido-mode</a></li>
<li><a href="#sec-35">35. git/magit</a></li>
<li><a href="#sec-36">36. sql support</a></li>
<li><a href="#sec-37">37. gpg</a></li>
<li><a href="#sec-38">38. wc</a></li>
<li><a href="#sec-39">39. Outline minor mode</a></li>
<li><a href="#sec-40">40. Misc utilities</a>
<ul>
<li><a href="#sec-40-1">40.1. copy-buffer-file-name</a></li>
<li><a href="#sec-40-2">40.2. copy-and-comment</a></li>
<li><a href="#sec-40-3">40.3. get-buffer-file-name</a></li>
<li><a href="#sec-40-4">40.4. unfill-paragraph</a></li>
</ul>
</li>
<li><a href="#sec-41">41. elisp-format</a></li>
<li><a href="#sec-42">42. emacsclient</a></li>
<li><a href="#sec-43">43. added by emacs</a></li>
<li><a href="#sec-44">44. License</a></li>
</ul>
</div>
</div>

<div class="org-src-container">

<pre class="src src-elisp">(message <span style="font-style: italic;">"loading ~/.emacs.d/init.el"</span>)
</pre>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Using this file</h2>
<div class="outline-text-2" id="text-1">
<table class="table table-striped table-condensed table-bordered table-hover">


<colgroup>
<col class="left"/>

<col class="left"/>
</colgroup>
<tbody>
<tr>
<td class="left">C-c i</td>
<td class="left">markup paragraph at point as a code block</td>
</tr>

<tr>
<td class="left">C-c C-v t</td>
<td class="left">tangle this file</td>
</tr>
</tbody>
</table>

<p>
Wrap text in an elisp code block to be tangled into init.el.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq init-file-name <span style="font-style: italic;">"init.el"</span>)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">init-insert-code-block</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Insert a code block that will be tangled into `init-file-name`</span>
  (interactive)
  (backward-paragraph)
  (insert (format <span style="font-style: italic;">"#+BEGIN_SRC elisp :tangle %s"</span> init-file-name))
  (forward-paragraph)
  (insert <span style="font-style: italic;">"#+END_SRC\n"</span>))
(global-set-key (kbd <span style="font-style: italic;">"C-c i"</span>) 'init-insert-code-block)
</pre>
</div>

<p>
(re)load init.el
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">init-load</span> ()
  <span style="font-style: italic;">"Load ~/.emacs.d/init.el"</span>
  (interactive)
  (load <span style="font-style: italic;">"~/.emacs.d/init.el"</span>))
(global-set-key (kbd <span style="font-style: italic;">"M-C-i"</span>) 'init-load)
</pre>
</div>

<p>
Tangle to <code>./init.el</code> and export html to <code>gh-pages/index.html</code>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">init-compile</span> ()
  <span style="font-style: italic;">"Tangle init.org and export html"</span>
  (interactive)
  (<span style="font-weight: bold;">progn</span>
    (org-babel-tangle)
    (org-html-export-as-html)
    (write-file <span style="font-style: italic;">"gh-pages/index.html"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Publishing to gh-pages</h2>
<div class="outline-text-2" id="text-2">
<p>
Here's how publication of the rendered version of this site to
GitHub's gh-pages is set up.
</p>

<p>
The gh-pages branch is added to the master branch as a submodule
</p>

<pre class="example">
git submodule add -b gh-pages git@github.com:nhoffman/.emacs.d.git gh-pages
</pre>

<p>
Note that in a new clone, the submodule needs to be initialized.
</p>

<pre class="example">
git submodule init
</pre>

<p>
A scons target pushes any new changes to the gh-pages branch on
GitHub.
</p>

<pre class="example">
publish_log, = env.Command(
    target='publish.log',
    source='init.org',
    action=('(cd gh-pages &amp;&amp; '
            'git checkout gh-pages &amp;&amp; '
            'git commit -a -m "update ghpages" &amp;&amp; '
            'git push origin gh-pages) | '
            'tee $TARGET')
    )
--
Depends(publish_log, [html])
</pre>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> ELPA</h2>
<div class="outline-text-2" id="text-3">
<p>
Set up and initialize ELPA package manager.
</p>

<p>
Some useful ELPA variables and functions:
</p>

<table class="table table-striped table-condensed table-bordered table-hover">


<colgroup>
<col class="left"/>

<col class="left"/>
</colgroup>
<tbody>
<tr>
<td class="left">M-x package-list-packages</td>
<td class="left">open list of packages</td>
</tr>

<tr>
<td class="left">package-activated-list</td>
<td class="left">variable containing list of the names of currently activated packages</td>
</tr>

<tr>
<td class="left">package-install</td>
<td class="left">install a package</td>
</tr>

<tr>
<td class="left">package-installed-p</td>
<td class="left">return true if package is installed</td>
</tr>
</tbody>
</table>

<p>
Add some extra package repositories. The default value of package-archives is
<code>(("gnu" . "http://elpa.gnu.org/packages/"))</code>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">when</span> (&gt;= emacs-major-version 24)
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">package</span>)
  (package-initialize)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Original Emacs Lisp Package Archive</span>
  (add-to-list 'package-archives
       '(<span style="font-style: italic;">"elpa"</span> . <span style="font-style: italic;">"http://tromey.com/elpa/"</span>) t)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User-contributed repository</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Marmalade is for packages that cannot be uploaded to the official ELPA repository.</span>
  (add-to-list 'package-archives
       '(<span style="font-style: italic;">"marmalade"</span> . <span style="font-style: italic;">"http://marmalade-repo.org/packages/"</span>) t)
  (add-to-list 'package-archives
       '(<span style="font-style: italic;">"melpa"</span> . <span style="font-style: italic;">"http://melpa.milkbox.net/packages/"</span>) t)
  (add-to-list 'package-archives
       '(<span style="font-style: italic;">"org"</span> . <span style="font-style: italic;">"http://orgmode.org/elpa/"</span>) t)
  )
</pre>
</div>

<p>
I could not find an obvious way to define a list of packages to
automatically install, so here are some functions to do so. Execute
<code>M-x package-install-my-packages</code> interactively to install any missing
packages. It seems to be necessary to run <code>M-x package-list-packages</code>
first. Note that when installing org-mode from elpa for the first
time, you must be sure that the builtin version of org-mode has not
been loaded since emacs was first started.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">package-installed-not-builtin-p</span> (package <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> min-version)
  <span style="font-style: italic;">"Return true if PACKAGE, of MIN-VERSION or newer, is installed,</span>
<span style="font-style: italic;">  ignoring built in packages.  MIN-VERSION should be a version list."</span>
  (<span style="font-weight: bold;">let</span> ((pkg-desc (assq package package-alist)))
    (<span style="font-weight: bold;">if</span> pkg-desc
        (version-list-&lt;= min-version (package-desc-vers (cdr pkg-desc))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">package-install-list</span> (pkg-list)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Install each package in pkg-list if necessary.</span>
  (mapcar
   (<span style="font-weight: bold;">lambda</span> (pkg)
     (<span style="font-weight: bold;">unless</span> (package-installed-not-builtin-p pkg)
       (package-install pkg)))
   pkg-list)
  (message <span style="font-style: italic;">"done installing packages"</span>))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">package-my-package-list</span>
  '(auctex
    edit-server
    ess
    flymake-cursor
    flycheck
    flycheck-color-mode-line
    gist
    htmlize
    magit
    markdown-mode
    moinmoin-mode
    org
    python-pylint
    rainbow-delimiters))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">package-install-my-packages</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Install packages listed in global 'package-my-package-list'</span>
  (interactive)
  (package-install-list package-my-package-list))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Various aliases and key bindings</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">dtw</span> 'delete-trailing-whitespace)
</pre>
</div>

<p>
Function keys
</p>

<div class="org-src-container">

<pre class="src src-elisp">(global-set-key (kbd <span style="font-style: italic;">"&lt;f6&gt;"</span>) 'linum-mode)
(global-set-key (kbd <span style="font-style: italic;">"&lt;f7&gt;"</span>) 'visual-line-mode)
(global-set-key (kbd <span style="font-style: italic;">"&lt;f8&gt;"</span>) 'ns-toggle-fullscreen)
</pre>
</div>

<p>
Various custom key bindings.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(global-set-key (kbd <span style="font-style: italic;">"C-c r"</span>) 'replace-string)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Startup and general appearance</h2>
<div class="outline-text-2" id="text-5">
<p>
Enable debugging
</p>

<div class="org-src-container">

<pre class="src src-elisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq debug-on-error t)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq debug-on-signal t)</span>
</pre>
</div>

<p>
Startup appearance.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq column-number-mode t)
(setq inhibit-splash-screen t)
(setq require-final-newline t)
(setq make-backup-files nil) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">no backup files</span>
(setq initial-scratch-message nil) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">no instructions in the *scratch* buffer</span>
(setq suggest-key-bindings 4)
(show-paren-mode 1)
</pre>
</div>

<p>
Date and time in status bar. See <a href="http://efod.se/writings/linuxbook/html/date-and-time.html">http://efod.se/writings/linuxbook/html/date-and-time.html</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq display-time-day-and-date t
      display-time-24hr-format t)
(display-time)
</pre>
</div>

<p>
File path in title bar. See <a href="http://stackoverflow.com/questions/3669511/the-function-to-show-current-files-full-path-in-mini-buffer">http://stackoverflow.com/questions/3669511/the-function-to-show-current-files-full-path-in-mini-buffer</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq frame-title-format
      (list (format <span style="font-style: italic;">"%s %%S: %%j "</span> (system-name))
        '(buffer-file-name <span style="font-style: italic;">"%f"</span> (dired-directory dired-directory <span style="font-style: italic;">"%b"</span>))))
</pre>
</div>

<p>
automatically refresh buffers from disk (default is every 5 sec)
see <a href="http://www.cs.cmu.edu/cgi-bin/info2www?(emacs)">http://www.cs.cmu.edu/cgi-bin/info2www?(emacs)</a>Reverting
</p>

<div class="org-src-container">

<pre class="src src-elisp">(global-auto-revert-mode 1)
</pre>
</div>

<p>
Add paths to 'exec-path' so that emacs can find executables not
otherwise defined in PATH.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-to-list 'exec-path <span style="font-style: italic;">"~/.emacs.d/bin"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Environment</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> update load path</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">

<pre class="src src-elisp">(add-to-list 'load-path <span style="font-style: italic;">"~/.emacs.d/"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> update SSH_AUTH_SOCK</h3>
<div class="outline-text-3" id="text-6-2">
<p>
If you 1) forward ssh authentication (ie, ssh -A), 2) have a
long-running emacs &#x2013;daemon and 3) set an expiration on your ssh
authentication, then you will lose the ability to perform ssh public
key authentication once the authentication expires. So actions like
pushing/pulling using magit will fail. This can be addressed by
updating the value of the SSH_AUTH_SOCK environment variable. Here's a
function to fix this.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ssh-refresh</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Reset the environment variable SSH_AUTH_SOCK.</span>
  (interactive)
  (setq ssh-auth-sock-old (getenv <span style="font-style: italic;">"SSH_AUTH_SOCK"</span>))
  (setenv <span style="font-style: italic;">"SSH_AUTH_SOCK"</span>
          (car (split-string
                (shell-command-to-string
                 <span style="font-style: italic;">"ls -t $(find /tmp/ssh-* -user $USER -name 'agent.*' 2&gt; /dev/null)"</span>))))
  (message
   (format <span style="font-style: italic;">"SSH_AUTH_SOCK %s --&gt; %s"</span>
           ssh-auth-sock-old (getenv <span style="font-style: italic;">"SSH_AUTH_SOCK"</span>)))
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> exec-path-from-shell</h3>
<div class="outline-text-3" id="text-6-3">
<p>
Initialize the PATH environment variable when starting up the Emacs
app from the finder. Found this tip here: <a href="https://plus.google.com/104330705025733851532/posts/K6YPSVEB9Nx">https://plus.google.com/104330705025733851532/posts/K6YPSVEB9Nx</a>
</p>

<p>
Commenting out for now, but seems promising&#x2026;.
</p>

<div class="org-src-container">

<pre class="src src-elisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(when (memq window-system '(mac ns))</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">(exec-path-from-shell-initialize))</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Exiting and saving</h2>
<div class="outline-text-2" id="text-7">
<p>
Require prompt before exit on C-x C-c
</p>
<ul class="org-ul">
<li><a href="http://www.dotemacs.de/dotfiles/KilianAFoth.emacs.html">http://www.dotemacs.de/dotfiles/KilianAFoth.emacs.html</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp">(global-set-key [(control x) (control c)]
                (function
                 (<span style="font-weight: bold;">lambda</span> () (interactive)
                   (<span style="font-weight: bold;">cond</span> ((y-or-n-p <span style="font-style: italic;">"Quit? (save-buffers-kill-terminal) "</span>)
                          (save-buffers-kill-terminal))))))
</pre>
</div>

<p>
Delete trailing whitespace before save.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'before-save-hook 'delete-trailing-whitespace)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Platform and display-specific settings</h2>
<div class="outline-text-2" id="text-8">
<p>
Detect platform and window system and set up fonts accordingly
</p>
<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">fix-frame</span> ()
  (interactive)
  (menu-bar-mode -1) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">hide menu bar</span>
  (tool-bar-mode -1) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">hide tool bar</span>
  (scroll-bar-mode -1) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">hide scroll bar</span>
  (<span style="font-weight: bold;">cond</span> ((string= <span style="font-style: italic;">"ns"</span> window-system) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">cocoa</span>
         (<span style="font-weight: bold;">progn</span> (message (format <span style="font-style: italic;">"** running %s windowing system"</span> window-system))
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">key bindings for mac - see</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">http://stuff-things.net/2009/01/06/emacs-on-the-mac/</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">http://osx.iusethis.com/app/carbonemacspackage</span>
         (set-keyboard-coding-system 'mac-roman)
         (setq mac-option-modifier 'meta)
         (setq mac-command-key-is-meta nil)
         (setq my-default-font <span style="font-style: italic;">"Bitstream Vera Sans Mono-14"</span>)
         ))
        ((string= <span style="font-style: italic;">"x"</span> window-system)
         (<span style="font-weight: bold;">progn</span>
           (message (format <span style="font-style: italic;">"** running %s windowing system"</span> window-system))
           (setq my-default-font <span style="font-style: italic;">"Liberation Mono-10"</span>)
           <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">M-w or C-w copies to system clipboard</span>
           <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">see http://www.gnu.org/software/emacs/elisp/html_node/Window-System-Selections.html</span>
           (setq x-select-enable-clipboard t)
           ))
        (t
         (<span style="font-weight: bold;">progn</span>
         (message <span style="font-style: italic;">"** running unknown windowing system"</span>)
         (setq my-default-font nil)
         ))
        )

  (<span style="font-weight: bold;">unless</span> (equal window-system nil)
    (message (format <span style="font-style: italic;">"** setting default font to %s"</span> my-default-font))
    (<span style="font-weight: bold;">condition-case</span> nil
        (set-default-font my-default-font)
      (<span style="font-weight: bold;">error</span> (message (format <span style="font-style: italic;">"** could not set to font %s"</span> my-default-font))))
    )
  )

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">font-dejavu</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">set default font to dejavu sans mono-11</span>
  (interactive)
  (set-default-font <span style="font-style: italic;">"dejavu sans mono-11"</span>)
  )
</pre>
</div>

<p>
Apply above settings on startup
</p>

<div class="org-src-container">

<pre class="src src-elisp">(fix-frame)
</pre>
</div>

<p>
&#x2026;and when creating a new connection to emacs server via emacsclient
</p>

<p>
TODO - not sure why this doesn't seem to take effect on frame creation
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'server-visit-hook 'fix-frame)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Scrolling</h2>
<div class="outline-text-2" id="text-9">
<p>
See <a href="http://www.emacswiki.org/emacs/SmoothScrolling">http://www.emacswiki.org/emacs/SmoothScrolling</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq mouse-wheel-scroll-amount '(3 ((shift) . 3))) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">number of lines at a time</span>
(setq mouse-wheel-progressive-speed nil) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">don't accelerate scrolling</span>
(setq mouse-wheel-follow-mosue 't) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">scroll window under mouse</span>
(setq scroll-step 1) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">keyboard scroll one line at a time</span>
(setq scroll-conservatively 1) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">scroll by one line to follow cursor off screen</span>
(setq scroll-margin 2) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Start scrolling when 2 lines from top/bottom</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Marking</h2>
<div class="outline-text-2" id="text-10">
<div class="org-src-container">

<pre class="src src-elisp">(transient-mark-mode 1) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">highlight active region - default in emacs 23.1+</span>
(global-set-key (kbd <span style="font-style: italic;">"M-C-t"</span>) 'transient-mark-mode)
(global-set-key (kbd <span style="font-style: italic;">"C-x C-b"</span>) 'electric-buffer-list)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Cursor Appearance.</h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">

<pre class="src src-elisp">(set-cursor-color <span style="font-style: italic;">"red"</span>)
(blink-cursor-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> iswitchb mode</h2>
<div class="outline-text-2" id="text-12">
<div class="org-src-container">

<pre class="src src-elisp">(iswitchb-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> Keyboard macros</h2>
<div class="outline-text-2" id="text-13">
<p>
See <a href="http://www.emacswiki.org/emacs/KeyboardMacros">http://www.emacswiki.org/emacs/KeyboardMacros</a>
note that default bindings for macros are:
</p>

<table class="table table-striped table-condensed table-bordered table-hover">


<colgroup>
<col class="left"/>

<col class="left"/>
</colgroup>
<tbody>
<tr>
<td class="left">C-x (</td>
<td class="left">start defining a keyboard macro</td>
</tr>

<tr>
<td class="left">C-x )</td>
<td class="left">stop defining the keyboard macro</td>
</tr>

<tr>
<td class="left">C-x e</td>
<td class="left">execute the keyboard macro</td>
</tr>
</tbody>
</table>

<p>
Some additional keyboard macro bindings.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(global-set-key (kbd <span style="font-style: italic;">"&lt;f5&gt;"</span>) 'call-last-kbd-macro)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> emacs desktop</h2>
<div class="outline-text-2" id="text-14">
<p>
References:
</p>
<ul class="org-ul">
<li><a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Emacs-Sessions.html">http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Emacs-Sessions.html</a>
</li>
<li><a href="http://www.emacswiki.org/emacs/DeskTop">http://www.emacswiki.org/emacs/DeskTop</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">desktop</span>)
</pre>
</div>

<p>
Save desktop periodically instead of just on exit, but not if emacs is
started with <code>--no-desktop</code>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(desktop-save-mode 1)
(<span style="font-weight: bold;">if</span> (and desktop-save-mode (not (member <span style="font-style: italic;">"--no-desktop"</span> command-line-args)))
    (<span style="font-weight: bold;">progn</span>
      (message <span style="font-style: italic;">"Enabling desktop auto-save"</span>)
      (add-hook 'auto-save-hook 'desktop-save-in-desktop-dir)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> Move lines up and down with arrow keys</h2>
<div class="outline-text-2" id="text-15">
<p>
See <a href="http://stackoverflow.com/questions/2423834/move-line-region-up-and-down-in-emacs">http://stackoverflow.com/questions/2423834/move-line-region-up-and-down-in-emacs</a>
</p>

<p>
Move line up
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">move-line-up</span> ()
  (interactive)
  (transpose-lines 1)
  (previous-line 2))
(global-set-key (kbd <span style="font-style: italic;">"M-&lt;up&gt;"</span>) 'move-line-up)
</pre>
</div>

<p>
Move line down.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">move-line-down</span> ()
  (interactive)
  (next-line 1)
  (transpose-lines 1)
  (previous-line 1))
(global-set-key (kbd <span style="font-style: italic;">"M-&lt;down&gt;"</span>) 'move-line-down)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> Buffers and windows</h2>
<div class="outline-text-2" id="text-16">
</div><div id="outline-container-sec-16-1" class="outline-3">
<h3 id="sec-16-1"><span class="section-number-3">16.1</span> Switch windows with arrow keys</h3>
<div class="outline-text-3" id="text-16-1">
<p>
Note that other-window is bound by default to <code>C-x o</code>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">back-window</span> ()
  (interactive)
  (other-window -1))
(global-set-key (kbd <span style="font-style: italic;">"C-&lt;right&gt;"</span>) 'other-window)
(global-set-key (kbd <span style="font-style: italic;">"C-&lt;left&gt;"</span>) 'back-window)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-16-2" class="outline-3">
<h3 id="sec-16-2"><span class="section-number-3">16.2</span> Transpose buffers</h3>
<div class="outline-text-3" id="text-16-2">
<ul class="org-ul">
<li>see <a href="http://www.emacswiki.org/emacs/SwitchingBuffers">http://www.emacswiki.org/emacs/SwitchingBuffers</a>
</li>
<li>note that original code used function 'plusp', which seems not to be defined in recent versions of emacs
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">transpose-buffers</span> (arg)
  <span style="font-style: italic;">"Transpose the buffers shown in two windows."</span>
  (interactive <span style="font-style: italic;">"p"</span>)
  (<span style="font-weight: bold;">let</span> ((selector (<span style="font-weight: bold;">if</span> (&gt;= arg 0) 'next-window 'previous-window)))
    (<span style="font-weight: bold;">while</span> (/= arg 0)
      (<span style="font-weight: bold;">let</span> ((this-win (window-buffer))
            (next-win (window-buffer (funcall selector))))
        (set-window-buffer (selected-window) next-win)
        (set-window-buffer (funcall selector) this-win)
        (select-window (funcall selector)))
      <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq arg (if (plusp arg) (1- arg) (1+ arg)))</span>
      (setq arg (<span style="font-weight: bold;">if</span> (&gt;= arg 0) (1- arg) (1+ arg)))
      )))
(global-set-key (kbd <span style="font-style: italic;">"C-x 4"</span>) 'transpose-buffers)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-16-3" class="outline-3">
<h3 id="sec-16-3"><span class="section-number-3">16.3</span> Switch buffers between frames</h3>
<div class="outline-text-3" id="text-16-3">
<p>
Also from <a href="http://www.emacswiki.org/emacs/SwitchingBuffers">http://www.emacswiki.org/emacs/SwitchingBuffers</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">switch-buffers-between-frames</span> ()
  <span style="font-style: italic;">"switch-buffers-between-frames switches the buffers between the two last frames"</span>
  (interactive)
  (<span style="font-weight: bold;">let</span> ((this-frame-buffer nil)
        (other-frame-buffer nil))
    (setq this-frame-buffer (car (frame-parameter nil 'buffer-list)))
    (other-frame 1)
    (setq other-frame-buffer (car (frame-parameter nil 'buffer-list)))
    (switch-to-buffer this-frame-buffer)
    (other-frame 1)
    (switch-to-buffer other-frame-buffer)))
(global-set-key (kbd <span style="font-style: italic;">"C-x 5"</span>) 'switch-buffers-between-frames)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> spelling</h2>
<div class="outline-text-2" id="text-17">
<p>
Use aspell instead of ispell
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq-default ispell-program-name <span style="font-style: italic;">"aspell"</span>)
(setq ispell-dictionary <span style="font-style: italic;">"en"</span>)
</pre>
</div>

<p>
Enable on-the-fly spell-check
</p>

<div class="org-src-container">

<pre class="src src-elisp">(autoload 'flyspell-mode <span style="font-style: italic;">"flyspell"</span> <span style="font-style: italic;">"On-the-fly spelling checker."</span> t)
(setq flyspell-issue-welcome-flag nil) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">fix error message</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><span class="section-number-2">18</span> pine/alpine</h2>
<div class="outline-text-2" id="text-18">
<p>
<a href="http://snarfed.org/space/emacs%20font-lock%20faces%20for%20composing%20email">http://snarfed.org/space/emacs%20font-lock%20faces%20for%20composing%20email</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'find-file-hooks
          '(<span style="font-weight: bold;">lambda</span> ()
             (<span style="font-weight: bold;">if</span> (equal <span style="font-style: italic;">"pico."</span> (substring (buffer-name (current-buffer)) 0 5))
                 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(message "** running hook for pine/alpine")</span>
                 (mail-mode))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19"><span class="section-number-2">19</span> LaTeX</h2>
<div class="outline-text-2" id="text-19">
<p>
Install AuxTeX from elpa.
</p>
</div>
</div>
<div id="outline-container-sec-20" class="outline-2">
<h2 id="sec-20"><span class="section-number-2">20</span> ESS</h2>
<div class="outline-text-2" id="text-20">
<p>
Installed using elpa, but seems to need <code>require</code> to be called
explicitly.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">condition-case</span> nil
    (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ess-site</span>)
  (<span style="font-weight: bold;">error</span> (message <span style="font-style: italic;">"** could not load ESS"</span>)))
</pre>
</div>

<p>
Hooks
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'ess-mode-hook
          '(<span style="font-weight: bold;">lambda</span>()
             (message <span style="font-style: italic;">"Loading ess-mode hooks"</span>)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">leave my underscore key alone!</span>
             (setq ess-S-assign <span style="font-style: italic;">"_"</span>)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(ess-toggle-underscore nil)</span>
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">set ESS indentation style</span>
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">choose from GNU, BSD, K&amp;R, CLB, and C++</span>
             (ess-set-style 'GNU 'quiet)
             (flyspell-mode)
             )
          )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-21" class="outline-2">
<h2 id="sec-21"><span class="section-number-2">21</span> org-mode</h2>
<div class="outline-text-2" id="text-21">
<p>
org-mode hooks
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'org-mode-hook
          '(<span style="font-weight: bold;">lambda</span> ()
             (message <span style="font-style: italic;">"Loading org-mode hooks"</span>)
             (turn-on-font-lock)
             (define-key org-mode-map (kbd <span style="font-style: italic;">"M-&lt;right&gt;"</span>) 'forward-word)
             (define-key org-mode-map (kbd <span style="font-style: italic;">"M-&lt;left&gt;"</span>) 'backward-word)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">provides key mapping for the above; replaces default</span>
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">key bindings for org-promote/demote-subtree</span>
             (define-key org-mode-map (kbd <span style="font-style: italic;">"M-S-&lt;right&gt;"</span>) 'org-do-demote)
             (define-key org-mode-map (kbd <span style="font-style: italic;">"M-S-&lt;left&gt;"</span>) 'org-do-promote)
             (org-indent-mode)
             (visual-line-mode)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-babel</span>
             (org-babel-do-load-languages
              'org-babel-load-languages
              '((R . t)
                (latex . t)
                (python . t)
                (sh . t)
                (sql . t)
                (sqlite . t)
                (pygment . t)
                ))
             )
          )

(custom-set-variables
 '(org-confirm-babel-evaluate nil)
 '(org-src-fontify-natively t))

(setq org-agenda-files (list <span style="font-style: italic;">"~/Dropbox/notes/index.org"</span>
                             <span style="font-style: italic;">"~/Dropbox/fredross/notes/plans.org"</span>
                             ))

(push '(<span style="font-style: italic;">"\\.org\\'"</span> . org-mode) auto-mode-alist)
(push '(<span style="font-style: italic;">"\\.org\\.txt\\'"</span> . org-mode) auto-mode-alist)
</pre>
</div>
</div>

<div id="outline-container-sec-21-1" class="outline-3">
<h3 id="sec-21-1"><span class="section-number-3">21.1</span> pygments</h3>
<div class="outline-text-3" id="text-21-1">
<p>
Syntax highlighting using <code>pygments</code> (<a href="http://pygments.org/">http://pygments.org/</a>).
</p>

<p>
<a href="http://oompiller.wordpress.com/2011/07/05/syntax-highlighting-using-pygment-in-org-mode/">http://oompiller.wordpress.com/2011/07/05/syntax-highlighting-using-pygment-in-org-mode/</a>
</p>

<p>
Install with
</p>

<pre class="example">
cd ~/.emacs.d
wget https://raw.github.com/jianingy/org-babel-plugins/master/ob-pygment.el
</pre>

<p>
Requires <code>(setq org-babel-load-languages (quote (pygment . t)))</code> above
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">condition-case</span> nil
    (<span style="font-weight: bold;">progn</span>
      (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ob-pygment</span>)
      (setq org-pygment-path <span style="font-style: italic;">"/usr/local/bin/pygmentize"</span>))
  (<span style="font-weight: bold;">error</span> (message <span style="font-style: italic;">"** could not load ob-pygment"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-21-2" class="outline-3">
<h3 id="sec-21-2"><span class="section-number-3">21.2</span> org-mode utilities</h3>
<div class="outline-text-3" id="text-21-2">
<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">insert-date</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Insert today's timestamp in format "&lt;%Y-%m-%d %a&gt;"</span>
  (interactive)
  (insert (format-time-string <span style="font-style: italic;">"&lt;%Y-%m-%d %a&gt;"</span>)))
(global-set-key (kbd <span style="font-style: italic;">"C-c d"</span>) 'insert-date)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-add-entry</span> (filename time-format)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Add an entry to an org-file with today's timestamp.</span>
  (interactive <span style="font-style: italic;">"FFile: "</span>)
  (find-file filename)
  (end-of-buffer)
  (delete-blank-lines)
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(insert "\n* ")</span>
  (insert (format-time-string time-format))
  (beginning-of-line)
  (forward-char 2))
</pre>
</div>

<p>
Add a new entry to main notes file.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(global-set-key
 (kbd <span style="font-style: italic;">"C-x C-n"</span>) (<span style="font-weight: bold;">lambda</span> () (interactive)
                   (org-add-entry <span style="font-style: italic;">"~/Dropbox/notes/index.org"</span>
                                  <span style="font-style: italic;">"\n* &lt;%Y-%m-%d %a&gt;"</span>)))
</pre>
</div>

<p>
Add an entry to todo file.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(global-set-key
 (kbd <span style="font-style: italic;">"C-x C-m"</span>) (<span style="font-weight: bold;">lambda</span> () (interactive)
                   (org-add-entry <span style="font-style: italic;">"~/Dropbox/notes/todo.org"</span>
                                  <span style="font-style: italic;">"\n** TODO &lt;%Y-%m-%d %a&gt;"</span>)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-22" class="outline-2">
<h2 id="sec-22"><span class="section-number-2">22</span> markdown</h2>
<div class="outline-text-2" id="text-22">
<p>
Installed using elpa.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(push '(<span style="font-style: italic;">"\\.md"</span> . markdown-mode) auto-mode-alist)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-23" class="outline-2">
<h2 id="sec-23"><span class="section-number-2">23</span> chrome "edit with emacs"</h2>
<div class="outline-text-2" id="text-23">
<p>
'edit-server' is initialized by elpa, but we need to start the server.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">condition-case</span> nil
    (edit-server-start)
  (<span style="font-weight: bold;">error</span> (message <span style="font-style: italic;">"** could not start edit-server (chrome edit with emacs)"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-24" class="outline-2">
<h2 id="sec-24"><span class="section-number-2">24</span> Python</h2>
<div class="outline-text-2" id="text-24">
<ul class="org-ul">
<li><a href="http://jesselegg.com/archives/2010/02/25/emacs-python-programmers-part-1/">http://jesselegg.com/archives/2010/02/25/emacs-python-programmers-part-1/</a>
</li>
</ul>

<p>
Hooks
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'python-mode-hook
          '(<span style="font-weight: bold;">lambda</span> ()
             (message <span style="font-style: italic;">"Loading python-mode hooks"</span>)
             (setq indent-tabs-mode nil)
             (setq tab-width 4)
             (setq py-indent-offset tab-width)
             (setq py-smart-indentation t)
             (define-key python-mode-map <span style="font-style: italic;">"\C-m"</span> 'newline-and-indent)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(hs-minor-mode)</span>
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">add function index to menu bar</span>
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(imenu-add-menubar-index)</span>
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(python-mode-untabify)</span>
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(linum-mode)</span>
             )
          )
</pre>
</div>

<p>
File name mappings
</p>

<div class="org-src-container">

<pre class="src src-elisp">(push '(<span style="font-style: italic;">"SConstruct"</span> . python-mode) auto-mode-alist)
(push '(<span style="font-style: italic;">"SConscript"</span> . python-mode) auto-mode-alist)
(push '(<span style="font-style: italic;">"*.cgi"</span> . python-mode) auto-mode-alist)
</pre>
</div>

<p>
Default 'untabify converts a tab to equivalent number of spaces before
deleting a single character.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq backward-delete-char-untabify-method <span style="font-style: italic;">"all"</span>)
</pre>
</div>

<p>
Make indentation more compliant with pep8 (see <a href="http://stackoverflow.com/revisions/5361478/2">http://stackoverflow.com/revisions/5361478/2</a>)
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defadvice</span> <span style="font-weight: bold;">python-calculate-indentation</span> (around outdent-closing-brackets)
  <span style="font-style: italic;">"Handle lines beginning with a closing bracket and indent them so that</span>
<span style="font-style: italic;">  they line up with the line containing the corresponding opening bracket."</span>
  (<span style="font-weight: bold;">save-excursion</span>
    (beginning-of-line)
    (<span style="font-weight: bold;">let</span> ((syntax (syntax-ppss)))
      (<span style="font-weight: bold;">if</span> (and (not (eq 'string (syntax-ppss-context syntax)))
               (python-continuation-line-p)
               (cadr syntax)
               (skip-syntax-forward <span style="font-style: italic;">"-"</span>)
               (looking-at <span style="font-style: italic;">"\\s)"</span>))
          (<span style="font-weight: bold;">progn</span>
            (forward-char 1)
            (<span style="font-weight: bold;">ignore-errors</span> (backward-sexp))
            (setq ad-return-value (current-indentation)))
        ad-do-it))))

(ad-activate 'python-calculate-indentation)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-25" class="outline-2">
<h2 id="sec-25"><span class="section-number-2">25</span> python-pylint</h2>
<div class="outline-text-2" id="text-25">
<p>
Installed using ELPA.
</p>

<p>
Invoke with <code>M-x python-pylint RET</code>
</p>
</div>
</div>
<div id="outline-container-sec-26" class="outline-2">
<h2 id="sec-26"><span class="section-number-2">26</span> flycheck</h2>
<div class="outline-text-2" id="text-26">
<p>
An alternative to <code>flymake</code>. Install <code>flycheck</code> via elpa. For python,
requires flask8 or pyflakes; flake8 is used preferentially if
installed.
</p>

<p>
See <a href="https://github.com/arcthur/.emacs.d/blob/master/extensions/init-flycheck.el">https://github.com/arcthur/.emacs.d/blob/master/extensions/init-flycheck.el</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'flycheck-mode-hook
          '(<span style="font-weight: bold;">lambda</span> ()
             (setq flycheck-highlighting-mode 'lines)
             (flycheck-color-mode-line-mode)
             )
          )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-27" class="outline-2">
<h2 id="sec-27"><span class="section-number-2">27</span> flymake: check code dynamically</h2>
<div class="outline-text-2" id="text-27">
<p>
Flymake can be used to check python code dynamically, for example
using pyflakes and pep8. I found (and slightly modified) instructions
here:
<a href="https://astropy.readthedocs.org/en/v0.1/development/codeguide_emacs.html">https://astropy.readthedocs.org/en/v0.1/development/codeguide_emacs.html</a>
</p>

<p>
Requirements:
</p>
<ul class="org-ul">
<li>pep8 (via pip)
</li>
<li>pyflakes (via pip)
</li>
<li>flymake-cursor (via elpa)
</li>
<li>"~/.emacs.d/bin/pychecker", a script that will execute pyflakes and
pep8 (note that "~/.emacs.d/bin" has been added to "exec-path"
above):
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">cat ~/.emacs.d/bin/pychecker
</pre>
</div>

<pre class="example">
#!/bin/bash

pyflakes "$1"
pep8 --ignore=E251,E123,E128 --repeat "$1"
true
</pre>

<p>
Error codes are listed here: <a href="http://pep8.readthedocs.org/en/latest/intro.html#error-codes">http://pep8.readthedocs.org/en/latest/intro.html#error-codes</a>
</p>

<p>
And some configuration:
</p>
<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">flymake</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO - first check if flymake-cursor is installed</span>
(<span style="font-weight: bold;">condition-case</span> nil
    (load-library <span style="font-style: italic;">"flymake-cursor"</span>) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">install from elpa</span>
      (<span style="font-weight: bold;">error</span> (message <span style="font-style: italic;">"** flymake-cursor not installed"</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'pychecker' script above installed in ~/.emacs.d/bin</span>
(setq pycodechecker <span style="font-style: italic;">"pychecker"</span>)

(<span style="font-weight: bold;">when</span> (load <span style="font-style: italic;">"flymake"</span> t)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">flymake-pycodecheck-init</span> ()
    (<span style="font-weight: bold;">let*</span> ((temp-file (flymake-init-create-temp-buffer-copy
                       'flymake-create-temp-inplace))
           (local-file (file-relative-name
                        temp-file
                        (file-name-directory buffer-file-name))))
      (list pycodechecker (list local-file))))
  (add-to-list 'flymake-allowed-file-name-masks
               '(<span style="font-style: italic;">"\\.py\\'"</span> flymake-pycodecheck-init))
  (add-to-list 'flymake-allowed-file-name-masks
               '(<span style="font-style: italic;">"SCons"</span> flymake-pycodecheck-init)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'python-mode-hook 'flymake-mode)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-28" class="outline-2">
<h2 id="sec-28"><span class="section-number-2">28</span> text-mode</h2>
<div class="outline-text-2" id="text-28">
<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'text-mode-hook
          '(<span style="font-weight: bold;">lambda</span> ()
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(longlines-mode)</span>
             (flyspell-mode)
             )
          )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-29" class="outline-2">
<h2 id="sec-29"><span class="section-number-2">29</span> rst-mode</h2>
<div class="outline-text-2" id="text-29">
<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'rst-mode-hook
          '(<span style="font-weight: bold;">lambda</span> ()
             (message <span style="font-style: italic;">"Loading rst-mode hooks"</span>)
             (flyspell-mode)
             (define-key rst-mode-map (kbd <span style="font-style: italic;">"C-c C-a"</span>) 'rst-adjust)
             )
          )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-30" class="outline-2">
<h2 id="sec-30"><span class="section-number-2">30</span> tramp</h2>
<div class="outline-text-2" id="text-30">
<ul class="org-ul">
<li><a href="http://www.gnu.org/software/tramp/">http://www.gnu.org/software/tramp/</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">condition-case</span> nil
    (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">tramp</span>)
  (setq tramp-default-method <span style="font-style: italic;">"scp"</span>)
  (<span style="font-weight: bold;">error</span> (message <span style="font-style: italic;">"** could not load tramp"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-31" class="outline-2">
<h2 id="sec-31"><span class="section-number-2">31</span> ibuffer</h2>
<div class="outline-text-2" id="text-31">
<ul class="org-ul">
<li><a href="http://emacs-fu.blogspot.com/2010/02/dealing-with-many-buffers-ibuffer.html">http://emacs-fu.blogspot.com/2010/02/dealing-with-many-buffers-ibuffer.html</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ibuffer</span>)
(global-set-key (kbd <span style="font-style: italic;">"C-x C-g"</span>) 'ibuffer)
(global-set-key (kbd <span style="font-style: italic;">"C-x M-g"</span>) 'ibuffer-switch-to-saved-filter-groups)
(setq ibuffer-show-empty-filter-groups nil)
</pre>
</div>

<p>
Function to load config file. Load on starup.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq ibuffer-config-file <span style="font-style: italic;">"~/.emacs.d/ibuffer-config.el"</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ibuffer-load-config</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">load the ibuffer config file</span>
  (interactive)
  (<span style="font-weight: bold;">condition-case</span> nil
      (<span style="font-weight: bold;">progn</span>
        (message (format <span style="font-style: italic;">"** loading ibuffer config in %s"</span> ibuffer-config-file))
        (load ibuffer-config-file)
        )
    (<span style="font-weight: bold;">error</span> (message (format <span style="font-style: italic;">"** could not load %s"</span> ibuffer-config-file))))
  )

(ibuffer-load-config)
</pre>
</div>

<p>
Show/hide all filter groups
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ibuffer-show-all-filter-groups</span> ()
  <span style="font-style: italic;">"Show all filter groups"</span>
  (interactive)
  (setq ibuffer-hidden-filter-groups nil)
  (ibuffer-update nil t))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ibuffer-hide-all-filter-groups</span> ()
  <span style="font-style: italic;">"Hide all filter groups"</span>
  (interactive)
  (setq ibuffer-hidden-filter-groups
        (delete-dups
         (append ibuffer-hidden-filter-groups
                 (mapcar 'car (ibuffer-generate-filter-groups
                               (ibuffer-current-state-list)
                               (not ibuffer-show-empty-filter-groups)
                               t)))))
  (ibuffer-update nil t))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ibuffer-reload</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">kill ibuffer, reload the config file, and return to ibuffer</span>
  (interactive)
  (ibuffer)
  (kill-buffer)
  (ibuffer-load-config)
  (ibuffer)
  )
</pre>
</div>

<p>
From <a href="http://www.emacswiki.org/emacs/IbufferMode">http://www.emacswiki.org/emacs/IbufferMode</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-ibuffer-sort-hook</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">add another sorting method for ibuffer (allow the grouping of</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">filenames and dired buffers</span>
  (define-ibuffer-sorter filename-or-dired
    <span style="font-style: italic;">"Sort the buffers by their pathname."</span>
    (<span style="font-weight: bold;">:description</span> <span style="font-style: italic;">"filenames plus dired"</span>)
    (string-lessp
     (<span style="font-weight: bold;">with-current-buffer</span> (car a)
       (or buffer-file-name
           (<span style="font-weight: bold;">if</span> (eq major-mode 'dired-mode)
               (expand-file-name dired-directory))
           <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">so that all non pathnames are at the end</span>
           <span style="font-style: italic;">"~"</span>))
     (<span style="font-weight: bold;">with-current-buffer</span> (car b)
       (or buffer-file-name
           (<span style="font-weight: bold;">if</span> (eq major-mode 'dired-mode)
               (expand-file-name dired-directory))
           <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">so that all non pathnames are at the end</span>
           <span style="font-style: italic;">"~"</span>))))
  (define-key ibuffer-mode-map (kbd <span style="font-style: italic;">"s p"</span>)     'ibuffer-do-sort-by-filename-or-dired)
  )
</pre>
</div>

<p>
From <a href="http://curiousprogrammer.wordpress.com/2009/04/02/ibuffer/">http://curiousprogrammer.wordpress.com/2009/04/02/ibuffer/</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ibuffer-ediff-marked-buffers</span> ()
  <span style="font-style: italic;">"Compare two marked buffers using ediff"</span>
  (interactive)
  (<span style="font-weight: bold;">let*</span> ((marked-buffers (ibuffer-get-marked-buffers))
         (len (length marked-buffers)))
    (<span style="font-weight: bold;">unless</span> (= 2 len)
      (<span style="font-weight: bold;">error</span> (format <span style="font-style: italic;">"%s buffer%s been marked (needs to be 2)"</span>
                     len (<span style="font-weight: bold;">if</span> (= len 1) <span style="font-style: italic;">" has"</span> <span style="font-style: italic;">"s have"</span>))))
    (ediff-buffers (car marked-buffers) (cadr marked-buffers))))
</pre>
</div>

<p>
Hooks
</p>

<div class="org-src-container">

<pre class="src src-elisp">(add-hook 'ibuffer-mode-hook
          '(<span style="font-weight: bold;">lambda</span> ()
             (ibuffer-auto-mode 1) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">minor mode that keeps the buffer list up to date</span>
             (ibuffer-switch-to-saved-filter-groups <span style="font-style: italic;">"default"</span>)
             (define-key ibuffer-mode-map (kbd <span style="font-style: italic;">"a"</span>) 'ibuffer-show-all-filter-groups)
             (define-key ibuffer-mode-map (kbd <span style="font-style: italic;">"z"</span>) 'ibuffer-hide-all-filter-groups)
             (define-key ibuffer-mode-map (kbd <span style="font-style: italic;">"e"</span>) 'ibuffer-ediff-marked-buffers)
             (my-ibuffer-sort-hook)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">don't accidentally print; see http://irreal.org/blog/?p=2013</span>
             (<span style="font-weight: bold;">defadvice</span> <span style="font-weight: bold;">ibuffer-do-print</span> (before print-buffer-query activate)
               (<span style="font-weight: bold;">unless</span> (y-or-n-p <span style="font-style: italic;">"Print buffer? "</span>)
                 (<span style="font-weight: bold;">error</span> <span style="font-style: italic;">"Cancelled"</span>)))
             )
          )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-32" class="outline-2">
<h2 id="sec-32"><span class="section-number-2">32</span> dired</h2>
<div class="outline-text-2" id="text-32">
<p>
Omit uninteresting files.
</p>

<ul class="org-ul">
<li><a href="http://www.gnu.org/software/emacs/manual/html_node/dired-x/Omitting-Files-in-Dired.html">http://www.gnu.org/software/emacs/manual/html_node/dired-x/Omitting-Files-in-Dired.html</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'dired-load-hook</span>
<span style="font-weight: bold; font-style: italic;">;;           </span><span style="font-weight: bold; font-style: italic;">(lambda ()</span>
<span style="font-weight: bold; font-style: italic;">;;             </span><span style="font-weight: bold; font-style: italic;">(load "dired-x")</span>
<span style="font-weight: bold; font-style: italic;">;;             </span><span style="font-weight: bold; font-style: italic;">))</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'dired-mode-hook</span>
<span style="font-weight: bold; font-style: italic;">;;           </span><span style="font-weight: bold; font-style: italic;">(lambda ()</span>
<span style="font-weight: bold; font-style: italic;">;;             </span><span style="font-weight: bold; font-style: italic;">;; Set dired-x buffer-local variables here.</span>
<span style="font-weight: bold; font-style: italic;">;;             </span><span style="font-weight: bold; font-style: italic;">(dired-omit-mode 1)</span>
<span style="font-weight: bold; font-style: italic;">;;             </span><span style="font-weight: bold; font-style: italic;">(setq dired-omit-extensions '(".pyc" ".git/"))</span>
<span style="font-weight: bold; font-style: italic;">;;             </span><span style="font-weight: bold; font-style: italic;">))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-33" class="outline-2">
<h2 id="sec-33"><span class="section-number-2">33</span> uniquify</h2>
<div class="outline-text-2" id="text-33">
<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/uniquify">http://www.emacswiki.org/emacs/uniquify</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">uniquify</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-34" class="outline-2">
<h2 id="sec-34"><span class="section-number-2">34</span> ido-mode</h2>
<div class="outline-text-2" id="text-34">
<ul class="org-ul">
<li><a href="http://www.masteringemacs.org/articles/2010/10/10/introduction-to-ido-mode/">http://www.masteringemacs.org/articles/2010/10/10/introduction-to-ido-mode/</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp">(setq ido-enable-flex-matching t)
(setq ido-everywhere t)
(setq ido-use-virtual-buffers t)
(ido-mode 1)
</pre>
</div>

<p>
use recentf with ido - see <a href="http://wikemacs.org/wiki/Recentf">http://wikemacs.org/wiki/Recentf</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(recentf-mode 1)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ido-choose-from-recentf</span> ()
  <span style="font-style: italic;">"Use ido to select a recently visited file from the `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">recentf-list</span><span style="font-style: italic;">'"</span>
  (interactive)
  (find-file (ido-completing-read <span style="font-style: italic;">"Open file: "</span> recentf-list nil t)))
(global-set-key (kbd <span style="font-style: italic;">"C-c f"</span>) 'ido-choose-from-recentf)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-35" class="outline-2">
<h2 id="sec-35"><span class="section-number-2">35</span> git/magit</h2>
<div class="outline-text-2" id="text-35">
<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">vc-git</span>)
</pre>
</div>

<p>
Magit is installed via ELPA.
</p>

<div class="org-src-container">

<pre class="src src-elisp">(global-set-key (kbd <span style="font-style: italic;">"C-c m"</span>) 'magit-status)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-36" class="outline-2">
<h2 id="sec-36"><span class="section-number-2">36</span> sql support</h2>
<div class="outline-text-2" id="text-36">
<ul class="org-ul">
<li>see <a href="http://atomized.org/2008/10/enhancing-emacs%E2%80%99-sql-mode/">http://atomized.org/2008/10/enhancing-emacs%E2%80%99-sql-mode/</a>
</li>
</ul>

<p>
Use sqlite3
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq sql-sqlite-program <span style="font-style: italic;">"sqlite3"</span>)
</pre>
</div>

<p>
Preset connections
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq sql-connection-alist
      '((filemaker-sps
         (sql-product 'mysql)
         (sql-server <span style="font-style: italic;">"1.2.3.4"</span>)
         (sql-user <span style="font-style: italic;">"me"</span>)
         (sql-password <span style="font-style: italic;">"mypassword"</span>)
         (sql-database <span style="font-style: italic;">"thedb"</span>)
         (sql-port 3307))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">sql-connect-preset</span> (name)
  <span style="font-style: italic;">"Connect to a predefined SQL connection listed in `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">sql-connection-alist</span><span style="font-style: italic;">'"</span>
  (eval `(<span style="font-weight: bold;">let</span> ,(cdr (assoc name sql-connection-alist))
    (<span style="font-weight: bold;">flet</span> ((sql-get-login (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> what)))
      (sql-product-interactive sql-product)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">sql-mastermu</span> ()
  (interactive)
  (sql-connect-preset 'mastermu))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">buffer naming</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">sql-make-smart-buffer-name</span> ()
  <span style="font-style: italic;">"Return a string that can be used to rename a SQLi buffer.</span>
<span style="font-style: italic;">This is used to set `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">sql-alternate-buffer-name</span><span style="font-style: italic;">' within</span>
<span style="font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">sql-interactive-mode</span><span style="font-style: italic;">'."</span>
  (or (and (boundp 'sql-name) sql-name)
      (concat (<span style="font-weight: bold;">if</span> (not(string= <span style="font-style: italic;">""</span> sql-server))
                  (concat
                   (or (and (string-match <span style="font-style: italic;">"[0-9.]+"</span> sql-server) sql-server)
                       (car (split-string sql-server <span style="font-style: italic;">"\\."</span>)))
                   <span style="font-style: italic;">"/"</span>))
              sql-database)))

(add-hook 'sql-interactive-mode-hook
          (<span style="font-weight: bold;">lambda</span> ()
            (setq sql-alternate-buffer-name (sql-make-smart-buffer-name))
            (sql-rename-buffer)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-37" class="outline-2">
<h2 id="sec-37"><span class="section-number-2">37</span> gpg</h2>
<div class="outline-text-2" id="text-37">
<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/EasyPG">http://www.emacswiki.org/emacs/EasyPG</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">epa-file</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(epa-file-enable)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">suppress graphical passphrase prompt</span>
(setenv <span style="font-style: italic;">"GPG_AGENT_INFO"</span> nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-38" class="outline-2">
<h2 id="sec-38"><span class="section-number-2">38</span> wc</h2>
<div class="outline-text-2" id="text-38">
<p>
From <a href="http://emacswiki.org/emacs/wc.el">http://emacswiki.org/emacs/wc.el</a>
</p>

<p>
To install:
</p>

<pre class="example">
cd ~/.emacs.d
wget http://www.emacswiki.org/emacs/download/wc.el
</pre>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">condition-case</span> nil
    (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">wc</span>)
      (<span style="font-weight: bold;">error</span> (message <span style="font-style: italic;">"** could not load wc.el"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-39" class="outline-2">
<h2 id="sec-39"><span class="section-number-2">39</span> Outline minor mode</h2>
<div class="outline-text-2" id="text-39">
<p>
The default key bindings for outline-minor-mode start with 'C-c @ C-',
which is&#x2026; awkward. Use alternative bindings courtesy of Sue D. Nymme
via emacswiki (<a href="http://emacswiki.org/emacs/OutlineMinorMode">http://emacswiki.org/emacs/OutlineMinorMode</a>).
</p>

<div class="org-src-container">

<pre class="src src-elisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Outline-minor-mode key map</span>
(define-prefix-command 'cm-map nil <span style="font-style: italic;">"Outline-"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">HIDE</span>
(define-key cm-map <span style="font-style: italic;">"q"</span> 'hide-sublevels)    <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Hide everything but the top-level headings</span>
(define-key cm-map <span style="font-style: italic;">"t"</span> 'hide-body)         <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Hide everything but headings (all body lines)</span>
(define-key cm-map <span style="font-style: italic;">"o"</span> 'hide-other)        <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Hide other branches</span>
(define-key cm-map <span style="font-style: italic;">"c"</span> 'hide-entry)        <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Hide this entry's body</span>
(define-key cm-map <span style="font-style: italic;">"l"</span> 'hide-leaves)       <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Hide body lines in this entry and sub-entries</span>
(define-key cm-map <span style="font-style: italic;">"d"</span> 'hide-subtree)      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Hide everything in this entry and sub-entries</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">SHOW</span>
(define-key cm-map <span style="font-style: italic;">"a"</span> 'show-all)          <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Show (expand) everything</span>
(define-key cm-map <span style="font-style: italic;">"e"</span> 'show-entry)        <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Show this heading's body</span>
(define-key cm-map <span style="font-style: italic;">"i"</span> 'show-children)     <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Show this heading's immediate child sub-headings</span>
(define-key cm-map <span style="font-style: italic;">"k"</span> 'show-branches)     <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Show all sub-headings under this heading</span>
(define-key cm-map <span style="font-style: italic;">"s"</span> 'show-subtree)      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Show (expand) everything in this heading &amp; below</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">MOVE</span>
(define-key cm-map <span style="font-style: italic;">"u"</span> 'outline-up-heading)                <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Up</span>
(define-key cm-map <span style="font-style: italic;">"n"</span> 'outline-next-visible-heading)      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Next</span>
(define-key cm-map <span style="font-style: italic;">"p"</span> 'outline-previous-visible-heading)  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Previous</span>
(define-key cm-map <span style="font-style: italic;">"f"</span> 'outline-forward-same-level)        <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Forward - same level</span>
(define-key cm-map <span style="font-style: italic;">"b"</span> 'outline-backward-same-level)       <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Backward - same level</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">commands are prefixed with C-c o</span>
(global-set-key (kbd <span style="font-style: italic;">"C-c o"</span>) cm-map)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-40" class="outline-2">
<h2 id="sec-40"><span class="section-number-2">40</span> Misc utilities</h2>
<div class="outline-text-2" id="text-40">
</div><div id="outline-container-sec-40-1" class="outline-3">
<h3 id="sec-40-1"><span class="section-number-3">40.1</span> copy-buffer-file-name</h3>
<div class="outline-text-3" id="text-40-1">
<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">copy-buffer-file-name</span> ()
  <span style="font-style: italic;">"Add `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">buffer-file-name</span><span style="font-style: italic;">' to `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">kill-ring</span><span style="font-style: italic;">'"</span>
  (interactive)
  (kill-new buffer-file-name t)
)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-40-2" class="outline-3">
<h3 id="sec-40-2"><span class="section-number-3">40.2</span> copy-and-comment</h3>
<div class="outline-text-3" id="text-40-2">
<div class="org-src-container">

<pre class="src src-elisp">(fset 'copy-and-comment
   <span style="font-style: italic;">"\367\C-x\C-x\273"</span>)
(global-set-key (kbd <span style="font-style: italic;">"M-C-;"</span>) 'copy-and-comment)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-40-3" class="outline-3">
<h3 id="sec-40-3"><span class="section-number-3">40.3</span> get-buffer-file-name</h3>
<div class="outline-text-3" id="text-40-3">
<div class="org-src-container">

<pre class="src src-elisp">(fset 'get-buffer-file-name
   <span style="font-style: italic;">"\C-hvbuffer-file-name\C-m"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-40-4" class="outline-3">
<h3 id="sec-40-4"><span class="section-number-3">40.4</span> unfill-paragraph</h3>
<div class="outline-text-3" id="text-40-4">
<p>
from <a href="http://defindit.com/readme_files/emacs_hints_tricks.html">http://defindit.com/readme_files/emacs_hints_tricks.html</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">unfill-paragraph</span> ()
  (interactive)
  (<span style="font-weight: bold;">let</span> ((fill-column (point-max)))
  (fill-paragraph nil)))
(global-set-key (kbd <span style="font-style: italic;">"M-C-q"</span>) 'unfill-paragraph)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-41" class="outline-2">
<h2 id="sec-41"><span class="section-number-2">41</span> elisp-format</h2>
<div class="outline-text-2" id="text-41">
<p>
Written by Andy Stewart and available on emacswiki: <a href="http://www.emacswiki.org/emacs/elisp-format.el">http://www.emacswiki.org/emacs/elisp-format.el</a>
</p>

<div class="org-src-container">

<pre class="src src-elisp">(<span style="font-weight: bold;">condition-case</span> nil
    (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">elisp-format</span>)
  (<span style="font-weight: bold;">error</span> (message <span style="font-style: italic;">"** could not load elisp-format"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-42" class="outline-2">
<h2 id="sec-42"><span class="section-number-2">42</span> emacsclient</h2>
<div class="outline-text-2" id="text-42">
<p>
Buffers opened from command line don't create new frame
</p>

<div class="org-src-container">

<pre class="src src-elisp">(setq ns-pop-up-frames nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-43" class="outline-2">
<h2 id="sec-43"><span class="section-number-2">43</span> added by emacs</h2>
<div class="outline-text-2" id="text-43">
<div class="org-src-container">

<pre class="src src-elisp"><span style="font-weight: bold; font-style: italic;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">content below was added by emacs ;;;;;;</span>
<span style="font-weight: bold; font-style: italic;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
(put 'downcase-region 'disabled nil)
(put 'upcase-region 'disabled nil)
(put 'narrow-to-region 'disabled nil)
(custom-set-variables
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">custom-set-variables was added by Custom.</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">If you edit it by hand, you could mess it up, so be careful.</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Your init file should contain only one such instance.</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">If there is more than one, they won't work right.</span>
 '(safe-local-variable-values (quote ((toggle-read-only . t))))
 '(uniquify-buffer-name-style (quote post-forward) nil (uniquify)))
(custom-set-faces
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">custom-set-faces was added by Custom.</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">If you edit it by hand, you could mess it up, so be careful.</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Your init file should contain only one such instance.</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">If there is more than one, they won't work right.</span>
 )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-44" class="outline-2">
<h2 id="sec-44"><span class="section-number-2">44</span> License</h2>
<div class="outline-text-2" id="text-44">
<div class="org-src-container">

<pre class="src src-elisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This program is free software: you can redistribute it and/or modify</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">it under the terms of the GNU General Public License as published by</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">the Free Software Foundation, either version 3 of the License, or</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(at your option) any later version.</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This program is distributed in the hope that it will be useful,</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">GNU General Public License for more details.</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">You should have received a copy of the GNU General Public License</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">along with this program.  If not, see &lt;<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.</span>
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Noah Hoffman</p>
<p class="date">Created: 2013-08-07 Wed 22:18</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.0.7)</p>
<p class="xhtml-validation"><a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a></p>
</div>
</body>
</html>
